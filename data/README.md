# Data to accompany "Automatically Reproducing Timing-Dependent Flaky_Test Failures"

This directory cotnains the data that we collected to generate the plots and figures in the paper. [timing-related-apis.txt](timing-related-apis.txt) provides easy access to the list of timing-related APIs that we used for FlakeRake in our experiments.

Our [artifact on Zenodo](https://zenodo.org/record/7601133#.Y9xFCS-B2mc) supplements this repository, and includes everything in this repository plus:  *all* result files and logs (>15GB) that were generated by running FlakeRake, and by running each test 10,000 times in isolated rerun, and by running each test suite 10,000 times in our "rerun replication". 

## Description of the data in this archive:
### Notebooks and analyses
The tables and figures provided in the paper are generated by notebooks included in this repository:

* [RQ1DetectionAnalysis.ipynb](RQ1DetectionAnalysis.ipynb)
* [RQ2ReproAnalysis.ipynb](RQ2ReproAnalysis.ipynb)
* [RQ3TimingAnalaysis.ipynb](RQ3TimingAnalysis.ipynb)
* [DiscussionCategorizedFailures.ipynb](DiscussionCategorizedFailures.ipynb)

Tables for RQ4 are generated by the script `fk-grab-min-meta.py` in the directory `characteristics`, which outputs the CSVs `bis_topn_causes.csv` (Table III) and `top_bis_corr_no_1.csv` (Table IV) and 

### Data frames
The file `matched-failures.csv` is the primary data source for analyzing our experimental results. Each failure that was detected in our experiments (or in the FlakeFlagger dataset) is provided a row. The columns `rerun`, `isolatedRerun`, `flakerake-obo`, `flakerake` and `flakeflagger-repl` represent the number of times that the failure was observed in the FlakeFlagger dataset, our isolated rerun experiment, our FlakeRake with one-by-one experiment, our FlakeRake with bisection experiment, and in our "Rerun Replication" experiment. The column `failureID` is the MD5 checksum of the stack trace of the failure. The columns `FailConfigs.flakerake` and `FailConfigs.flakerake-obo` show the failure configurations used to produce that failure by FlakeRake.

This file is supported by `categorized-failure-ids.csv`, which maps from each failure ID to the categorization of the failure.

`repro-matches.csv` contains the results of our reproduction study (RQ2): for each FlakeFlagger "Rerun" failure that was reproduced by any approach in our studies, we collect the number of times that it is reproduced by that approach.

The directory `rq3-timing-analysis` contains data collected regarding the time needed to reproduce each failure. The files `failingIndices.<technique>.csv` collect the run IDs from each experiment that identified flaky tests. The files `timing.<technique>.csv` collect the average time needed to run each test under each technique. We collect the timing data for flakerake separately, in the files `flakerake5-timeToFails-through-100.csv` and `flakerake5-offline-timeToFails-through-100.csv`.

### Running Fixing Prototype

```bash run_for_fixing.sh input.csv```

